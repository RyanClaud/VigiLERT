import{a0 as w,r as d,o as D,Z as A,n as g,U as p,c as r,a as t,t as o,x as y,g as v,d as l,u as C,b as m}from"./index-igiuMsdt.js";import{_ as E,a as L}from"./RecentAlerts-Cj4roK8Z.js";const N={class:"min-h-screen flex flex-col bg-[#EDE8F5]"},S={class:"flex-1 px-4 md:px-8 py-6"},R={key:0,class:"flex justify-center items-center h-64"},k={key:1},V={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 mb-6"},B={class:"bg-[#3D52A0] text-white rounded-xl shadow-lg p-6 flex items-center gap-4"},I={class:"text-2xl font-bold"},$={class:"text-xs"},O={class:"bg-[#7091E6] text-white rounded-xl shadow-lg p-6 flex items-center gap-4"},j={class:"text-2xl font-bold"},F={class:"text-xs"},H={class:"text-2xl font-bold"},M={class:"text-xs"},T={class:"bg-white rounded-lg shadow p-4 md:p-6 mb-4"},W={class:"text-sm text-[#7091E6] mb-2"},z={class:"text-xs text-[#8697C4] mb-2"},G={class:"bg-white rounded-lg shadow p-4 md:p-6 mb-4"},K={class:"text-sm text-[#7091E6] mb-2"},P={class:"text-xs text-[#8697C4] mb-2"},U={class:"bg-white rounded-lg shadow p-4 md:p-6 mb-4"},Z={class:"mt-8"},q={class:"bg-[rgb(251,251,252)] rounded-lg shadow p-4"},J={class:"mt-8"},Q={class:"bg-[#EDE8F5] rounded-lg shadow p-4"},et={__name:"EmergencyContactDashboard",setup(X){const b=w(),f=C(),c=b.params.userId,s=d({}),n=d({}),x=d(!0);function h(){f.push("/emergency-login")}return D(()=>{const a=A(),e=g(a,`helmet/${c}`);p(e,i=>{s.value=i.val()||{}});const _=g(a,`users/${c}/emergencyContacts`);p(_,i=>{const u=i.val();u&&(n.value=Object.values(u)[0]||{}),x.value=!1})}),(a,e)=>(m(),r("div",N,[t("div",{class:"flex flex-col md:flex-row items-center justify-between py-4 px-4"},[e[0]||(e[0]=t("div",{class:"flex items-center gap-2 bg-[#7091E6] px-6 py-2 rounded-xl shadow text-white"},[t("span",{class:"font-semibold text-lg"},"Emergency Contact View (For Viewing-Access Only)")],-1)),t("button",{onClick:h,class:"mt-2 md:mt-0 bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-semibold transition"}," Logout ")]),t("main",S,[x.value?(m(),r("div",R,e[1]||(e[1]=[t("span",{class:"text-[#7091E6] text-lg font-semibold"},"Loading dashboard...",-1)]))):(m(),r("div",k,[t("div",V,[t("div",B,[e[3]||(e[3]=t("span",{class:"material-icons text-3xl"},"RIDER",-1)),t("div",null,[e[2]||(e[2]=t("div",{class:"text-sm font-medium"},"Status",-1)),t("div",I,o(s.value.helmetConnected?"Active":"Inactive"),1),t("div",$,o(s.value.helmetConnected?"Helmet connected":"Helmet not connected"),1)])]),t("div",O,[e[5]||(e[5]=t("span",{class:"material-icons text-3xl"},"speed",-1)),t("div",null,[e[4]||(e[4]=t("div",{class:"text-sm font-medium"},"Current Speed",-1)),t("div",j,o(s.value.speed||0)+" kph",1),t("div",F,o(s.value.speed>(s.value.speedLimit||90)?"Over speed limit!":"Within speed limit"),1)])]),t("div",{class:y(["rounded-xl shadow-lg p-6 flex items-center gap-4",s.value.alertnessStatus==="Normal"?"bg-[#8697C4] text-white":"bg-yellow-400 text-[#3D52A0]"])},[e[7]||(e[7]=t("span",{class:"material-icons text-3xl"},"AWAKE",-1)),t("div",null,[e[6]||(e[6]=t("div",{class:"text-sm font-medium"},"Alertness",-1)),t("div",H,o(s.value.alertnessStatus||"Normal"),1),t("div",M,o(s.value.alertnessStatus==="Normal"?"No drowsiness detected":"Drowsiness detected!"),1)])],2)]),e[15]||(e[15]=t("div",{class:"mb-6"},[t("div",{class:"bg-[#ADBBD4] rounded-lg p-2 flex flex-wrap gap-2 text-[#3D52A0] font-semibold"},"My Location, Speed Data, Diagnostics (View Only)")],-1)),t("div",T,[e[8]||(e[8]=t("h4",{class:"font-semibold text-lg mb-2 text-[#3D52A0]"},"Current Location",-1)),t("div",W,"Lat: "+o(s.value.locationLat)+", Lng: "+o(s.value.locationLng),1),t("div",z,"Address: "+o(s.value.locationAddress),1)]),t("div",G,[e[9]||(e[9]=t("h4",{class:"font-semibold text-lg mb-2 text-[#3D52A0]"},"Speed Data",-1)),t("div",K,"Current Speed: "+o(s.value.speed||0)+" kph",1),t("div",P,"Speed Limit: "+o(s.value.speedLimit||90)+" kph",1)]),t("div",U,[v(E,{diagnostics:s.value.diagnostics||[]},null,8,["diagnostics"])]),t("section",Z,[e[10]||(e[10]=t("h3",{class:"font-semibold text-lg mb-2 text-[#3D52A0] flex items-center gap-2"},[t("span",{class:"material-icons text-xl"},"Notifications"),l(" Recent Alerts ")],-1)),t("div",q,[v(L,{alerts:s.value.alerts||[]},null,8,["alerts"])])]),t("section",J,[e[14]||(e[14]=t("h3",{class:"font-semibold text-lg mb-2 text-[#3D52A0] flex items-center gap-2"},[t("span",{class:"material-icons text-xl"},"Emergency"),l(" Contacts Information ")],-1)),t("div",Q,[t("p",null,[e[11]||(e[11]=t("strong",null,"Name:",-1)),l(" "+o(n.value.name||"N/A"),1)]),t("p",null,[e[12]||(e[12]=t("strong",null,"Phone:",-1)),l(" "+o(n.value.phone||"N/A"),1)]),t("p",null,[e[13]||(e[13]=t("strong",null,"Relationship:",-1)),l(" "+o(n.value.relationship||"N/A"),1)])])])]))]),e[16]||(e[16]=t("footer",{class:"bg-[#ADBBD4] text-center py-4 text-[#3D52A0] text-sm border-t mt-auto"}," Â© 2025 VIGILERT. All rights reserved. ",-1))]))}};export{et as default};
