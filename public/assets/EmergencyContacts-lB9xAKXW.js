import{r as d,W as w,c,a as e,d as x,w as _,f as u,v as m,F as D,q as k,j as A,n as p,p as h,U as E,b as f,t as v,X as B,m as C,Y as j}from"./index-igiuMsdt.js";const M={class:"space-y-6"},V={class:"bg-[#3D52A0] shadow px-4 py-5 sm:rounded-lg sm:p-6"},$={class:"md:grid md:grid-cols-3 md:gap-6"},F={class:"mt-5 md:mt-0 md:col-span-2"},P={class:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-6"},R={class:"sm:col-span-3"},q={class:"mt-1"},N={class:"sm:col-span-3"},U={class:"mt-1"},S={class:"sm:col-span-6"},z={class:"mt-1"},L={class:"mt-8"},T={class:"mt-4 bg-[#EDE8F5] shadow overflow-hidden sm:rounded-md"},Y={role:"list",class:"divide-y divide-[#5e80bb]"},I={class:"px-4 py-4 sm:px-6"},O={class:"flex items-center justify-between"},W={class:"flex items-center"},X={class:"ml-4"},G={class:"text-lg font-medium text-[#3D52A0]"},H={class:"text-sm text-[#7091E6]"},J={class:"ml-2 flex-shrink-0 flex"},K=["onClick"],Q={class:"mt-2"},Z={class:"text-sm text-[#7091E6]"},se={__name:"EmergencyContacts",setup(ee){const i=d([]),n=d({name:"",phone:"",relationship:""}),a=d(null);w(A,o=>{a.value=o?o.uid:null,a.value&&g()});function g(){const o=p(h,`users/${a.value}/emergencyContacts`);E(o,t=>{const s=t.val();s?i.value=Object.entries(s).map(([l,r])=>({id:l,...r})).sort((l,r)=>r.createdAt-l.createdAt):i.value=[]})}const b=async()=>{if(!a.value){alert("Please log in to add emergency contacts");return}try{const o=p(h,`users/${a.value}/emergencyContacts`),t=B(o);await C(t,{...n.value,createdAt:Date.now()}),n.value={name:"",phone:"",relationship:""},alert("Emergency contact added successfully!")}catch(o){console.error("Error adding contact:",o),alert("Failed to add contact. Please try again.")}},y=async o=>{if(a.value&&confirm("Are you sure you want to delete this contact?"))try{const t=p(h,`users/${a.value}/emergencyContacts/${o}`);await j(t)}catch(t){console.error("Error deleting contact:",t),alert("Failed to delete contact. Please try again.")}};return(o,t)=>(f(),c("div",M,[e("div",V,[e("div",$,[t[10]||(t[10]=e("div",{class:"md:col-span-1"},[e("h3",{class:"text-lg font-medium leading-6 text-white"},"Emergency Contacts"),e("p",{class:"mt-1 text-sm text-white"},[e("br"),e("br"),x(" Manage your emergency contacts for alerts and notifications. ")])],-1)),e("div",F,[e("form",{onSubmit:_(b,["prevent"]),class:"space-y-6"},[e("div",P,[e("div",R,[t[3]||(t[3]=e("label",{for:"name",class:"block text-sm font-medium text-white"},"Name",-1)),e("div",q,[u(e("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=s=>n.value.name=s),class:"shadow-sm focus:ring-[#7091E6] focus:border-[#7091E6] block w-full sm:text-sm border-[#ADBBD4] rounded-lg px-4 py-3 bg-white text-[#3D52A0] placeholder-[#ADBBD4] transition",required:""},null,512),[[m,n.value.name]])])]),e("div",N,[t[4]||(t[4]=e("label",{for:"phone",class:"block text-sm font-medium text-white"},"Phone Number",-1)),e("div",U,[u(e("input",{type:"tel",id:"phone","onUpdate:modelValue":t[1]||(t[1]=s=>n.value.phone=s),class:"shadow-sm focus:ring-[#7091E6] focus:border-[#7091E6] block w-full sm:text-sm border-[#ADBBD4] rounded-lg px-4 py-3 bg-white text-[#3D52A0] placeholder-[#ADBBD4] transition",required:""},null,512),[[m,n.value.phone]])])]),e("div",S,[t[5]||(t[5]=e("label",{for:"relationship",class:"block text-sm font-medium text-white"},"Relationship",-1)),e("div",z,[u(e("input",{type:"text",id:"relationship","onUpdate:modelValue":t[2]||(t[2]=s=>n.value.relationship=s),class:"shadow-sm focus:ring-[#7091E6] focus:border-[#7091E6] block w-full sm:text-sm border-[#ADBBD4] rounded-lg px-4 py-3 bg-white text-[#3D52A0] placeholder-[#ADBBD4] transition",required:""},null,512),[[m,n.value.relationship]])])])]),t[6]||(t[6]=e("div",{class:"flex justify-end"},[e("button",{type:"submit",class:"ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Add Contact ")],-1))],32),e("div",L,[t[9]||(t[9]=e("h4",{class:"text-lg font-medium text-[#3D52A0]"},"Your Emergency Contacts",-1)),e("div",T,[e("ul",Y,[(f(!0),c(D,null,k(i.value,s=>(f(),c("li",{key:s.id},[e("div",I,[e("div",O,[e("div",W,[t[7]||(t[7]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-6 w-6 text-[#7091E6]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",X,[e("h4",G,v(s.name),1),e("p",H,v(s.relationship),1)])]),e("div",J,[e("button",{onClick:l=>y(s.id),class:"flex items-center gap-1 text-red-600 hover:text-red-900"},t[8]||(t[8]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),x(" Delete ")]),8,K)])]),e("div",Q,[e("p",Z," Phone: "+v(s.phone),1)])])]))),128))])])])])])])]))}};export{se as default};
